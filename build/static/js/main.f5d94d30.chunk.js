(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(13),u=n.n(o),l=n(3),i=n.n(l),s="/api/persons",f=function(){return i.a.get(s).then((function(e){return e.data}))},m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=function(e){var t=e.persons,n=e.setPersons,o=e.setNotification,u=Object(r.useState)(""),l=Object(a.a)(u,2),i=l[0],s=l[1],f=Object(r.useState)(""),p=Object(a.a)(f,2),h=p[0],E=p[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:i,number:h,dateAdded:(new Date).toISOString()},r=t.filter((function(e){return e.name.toLowerCase()===i.toLowerCase()}));0!==r.length?function(e,a){d(e,a).then((function(r){n(t.map((function(t){return t.id!==e?t:r}))),o("".concat(a.name," updated"))})).catch((function(e){o(e.response.data)}))}(r[0].id,a):m(a).then((function(e){n(t.concat(e)),o("".concat(a.name," created!"))})).catch((function(e){o(e.response.data.error)})),s(""),E("")}},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:i,onChange:function(e){return s(e.target.value)}}),c.a.createElement("br",null),"number: ",c.a.createElement("input",{value:h,onChange:function(e){return E(e.target.value)}}),c.a.createElement("br",null)),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},E=function(e){var t=e.person,n=e.handleDelete;return c.a.createElement("p",{className:"person"},t.name," - ",t.number," -"," ",c.a.createElement("button",{onClick:function(){return n(t.id)}},"Delete"))},b=function(e){var t=e.peopleToShow,n=e.handleDelete;return t.length>0?t.map((function(e,t){return c.a.createElement(E,{key:t,person:e,handleDelete:n})})):c.a.createElement("p",null,"No match")},v=function(e){var t=e.newFilter,n=e.handleNewFilter;return c.a.createElement("p",null,"Filter: ",c.a.createElement("input",{value:t,onChange:n}))},w=function(e){var t=e.message;return null===t?null:c.a.createElement("div",{className:"error"},t)},g=(n(36),function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(null),l=Object(a.a)(u,2),i=l[0],s=l[1];Object(r.useEffect)((function(){f().then((function(e){return o(e)})).catch((function(e){return console.log(e.response.data)}))}),[]);var m=Object(r.useState)(""),d=Object(a.a)(m,2),E=d[0],g=d[1],O=E?n.filter((function(e){return e.name.toLowerCase().includes(E.toLowerCase())})):n;return c.a.createElement("div",null,c.a.createElement(w,{message:i}),c.a.createElement("h2",null,"Phonebook"),c.a.createElement(v,{newFilter:E,handleNewFilter:function(e){return g(e.target.value)}}),c.a.createElement("h3",null,"Add a new person"),c.a.createElement(h,{persons:n,setPersons:o,setNotification:s}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(b,{peopleToShow:O,handleDelete:function(e){window.confirm("Delete person ".concat(e,"?"))?p(e).then((function(t){o(n.filter((function(n){return n.id!==e?n:t.data}))),s("Person #".concat(e," was deleted"))})).catch((function(e){console.log(e.response.data),s(e.response.data)})):s("Deleteing #".concat(e," failed "))}}))});t.default=g;u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f5d94d30.chunk.js.map